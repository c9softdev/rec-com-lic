<div class="modal fade" #schedulerModal tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" [ngClass]="{ 'modal-fullscreen': isMaximized }">
    <div class="modal-content">
      <div class="modal-header modal-head text-white">
        <h5 class="modal-title">Interview Scheduler â€” {{ jobseekerName }} [{{ jobseekerId }}]</h5>
        <div class="d-flex align-items-center ms-auto gap-2">
          <button type="button" class="btn btn-sm btn-outline-light" (click)="toggleMaximize()" [attr.aria-pressed]="isMaximized" title="{{ isMaximized ? 'Restore' : 'Maximize' }}">
            <i class="fas" [ngClass]="isMaximized ? 'fa-compress' : 'fa-expand'"></i>
          </button>
          <button type="button" class="btn-close btn-close-white" (click)="close()"></button>
        </div>
      </div>

      <div class="modal-body">
        <form [formGroup]="schedulerForm" (ngSubmit)="submitForm()">

          <!-- Row with 2 fields -->
          <div class="row g-3">
            <div class="col-md-6">
              <label for="interviewCity" class="form-label">Interview City <span class="text-danger">*</span></label>
              <select
                class="form-control" 
                id="interviewCity" 
                formControlName="interviewCity"
                [class.is-invalid]="isInvalid('interviewCity')"
              >
                <option value="">Select City</option>
                @for (intvCity of intvCityArr; track intvCity.id) {
                  <option [value]="intvCity.id">
                    {{ intvCity.name }}
                  </option> 
                }
              </select>
              @if (isInvalid('interviewCity')) {
                <div class="invalid-feedback">
                  {{ getValidationMessage('interviewCity') }}
                </div>
              }
            </div>

            <div class="col-md-6">
              <label for="interviewDate" class="form-label">Interview Date <span class="text-danger">*</span></label>
              <input 
                type="date" 
                class="form-control" 
                id="interviewDate" 
                formControlName="interviewDate"
                [class.is-invalid]="isInvalid('interviewDate')"
              />
              @if (isInvalid('interviewDate')) {
                <div class="invalid-feedback">
                  {{ getValidationMessage('interviewDate') }}
                </div>
              }
            </div>
          </div>

          <!-- Another field -->
          <div class="mt-3">
            <label for="remark" class="form-label">Remark <span class="text-danger">*</span></label>
            <select
              class="form-control" 
              id="remark" 
              formControlName="remark"
              [class.is-invalid]="isInvalid('remark')"
            >
              <option value="">Select Remark</option>
              @for (interviewSch of intrvSchedulArr; track interviewSch.id) {
                <option [value]="interviewSch.id">
                  {{ interviewSch.name }}
                </option> 
              }
            </select>
            @if (isInvalid('remark')) {
              <div class="invalid-feedback">
                {{ getValidationMessage('remark') }}
              </div>
            }
          </div>

          <div class="mt-3">
            <label for="description" class="form-label">Description / Remark</label>
            <textarea 
              class="form-control" 
              id="description" 
              rows="4"
              formControlName="description"
              [class.is-invalid]="isInvalid('description')"
              placeholder="Enter additional remarks (optional)"
            ></textarea>
            @if (isInvalid('description')) {
              <div class="invalid-feedback">
                {{ getValidationMessage('description') }}
              </div>
            }
            <div class="form-text text-end">
              {{ schedulerForm.get('description')?.value?.length || 0 }}/500 characters
            </div>
          </div>

          @if (hasFormErrors()) {
            <div class="alert alert-warning mt-3">
              <i class="fas fa-exclamation-triangle me-2"></i>
              Please fix the validation errors before submitting.
            </div>
          }

          <div class="d-flex justify-content-between mt-3">
            <button type="submit" class="btn btn-outline-primary">
              <i class="fas fa-save me-2"></i> Submit
            </button>
            <button type="button" class="btn btn-outline-danger" (click)="close()">
              <i class="fas fa-times me-2"></i> Cancel
            </button>
          </div>

        </form>
      </div>
    </div>
  </div>
</div>